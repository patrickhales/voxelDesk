

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>vxd_make_nii_rgb.py &mdash; voxelDesk 0.2 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="vxd_make_nii_rgb_fusion.py" href="vxd_make_nii_rgb_fusion.html" />
    <link rel="prev" title="vxd_summarize_dcminfo.py" href="../vxdDicom/vxd_summarize_dcminfo.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> voxelDesk
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Installation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installation/dependencies.html">Installing the dependencies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation/vxd.html">Installing voxelDesk</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation/conda.html">Creating the conda virtual environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation/envs.html">Setting the environment variables and file permissions</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Configuration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../setup/config.html">Setting the configuration parameters</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">DICOM Sorting and NIFTI Conversion</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../vxdSort/vxdSort.html">vxdSort.py</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">DICOM Tools</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../vxdDicom/vxd_make_dicom.html">vxd_make_dicom.py</a></li>
<li class="toctree-l1"><a class="reference internal" href="../vxdDicom/vxd_summarize_dcminfo.html">vxd_summarize_dcminfo.py</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">NIFTI Tools</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">vxd_make_nii_rgb.py</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#synopsis">Synopsis</a></li>
<li class="toctree-l2"><a class="reference internal" href="#usage">Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="#description">Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="#options">Options</a></li>
<li class="toctree-l2"><a class="reference internal" href="#example-usages">Example Usages</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="vxd_make_nii_rgb_fusion.html">vxd_make_nii_rgb_fusion.py</a></li>
<li class="toctree-l1"><a class="reference internal" href="vxd_tidy.html">vxd_tidy.py</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Diffusion Pre-Processing</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../vxdDiff/vxd_diff_preproc.html">vxd_diff_preproc.py</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">voxelDesk</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>vxd_make_nii_rgb.py</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/vxdNifti/vxd_make_nii_rgb.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="vxd-make-nii-rgb-py">
<span id="vxd-make-nii-rgb"></span><h1>vxd_make_nii_rgb.py<a class="headerlink" href="#vxd-make-nii-rgb-py" title="Permalink to this headline">¶</a></h1>
<div class="section" id="synopsis">
<h2>Synopsis<a class="headerlink" href="#synopsis" title="Permalink to this headline">¶</a></h2>
<p>Create a colour version of an existing NIFTI file, based on a specified colour palette.</p>
</div>
<div class="section" id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>vxd_make_nii_rgb.py -i/--input &lt;source NIFTI file&gt; [options]
</pre></div>
</div>
<ul class="simple">
<li><p><strong>-i</strong>/<strong>--input</strong>: path to the source NIFTI file. The data can be 2D, 3D or 4D.</p></li>
</ul>
</div>
<div class="section" id="description">
<h2>Description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p><strong>vxd_make_nii_rgb.py</strong> will take an existing NIFTI dataset, and create a colour version of it. This is achieved by
appending an additional dimension to the dataset, which provides a (red,green,blue) triplet for each voxel.
RGB values are scaled between 0-1, and values are determined based on a given colourmap, specified
using the <strong>-c</strong>/<strong>--cmap</strong> option (see below - ‘jet’ is the default).</p>
<p>A new NIFTI file is written, using the same filename as the source file, with an ‘_rgb’ suffix.</p>
</div>
<div class="section" id="options">
<h2>Options<a class="headerlink" href="#options" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p><strong>-c</strong> / <strong>--cmap</strong> <em>colourmap</em>:
Option to specify which colourmap is used to determine the (R,G,B) values (default is jet).
Colourmaps are taken from the <em>matplotlib</em> library, and the available colourmaps can be viewed
<a class="reference external" href="https://matplotlib.org/stable/tutorials/colors/colormaps.html">here</a>.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</li>
<li><p><strong>-b</strong> / <strong>--black</strong>:
Flag to set the lowest values in the source NIFTI dataset to appear as black (regardless of the colourmap used).
This can be useful for creating a black background when, for example, all non-tissue voxels have been set to have
a value of zero.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</li>
<li><p><strong>-m</strong> / <strong>--mask</strong>:
Flag to create and apply a brain mask to the input NIFTI images, using FSL’s <a class="reference external" href="https://fsl.fmrib.ox.ac.uk/fsl/fslwiki/BET">bet</a>
algorithm (requires an existing FSL installation). This can be useful for brain images, to stop colourmaps being applied to
the background noise (particularly if combined with the <strong>-b</strong> / <strong>--black</strong> flag).</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</li>
<li><p><strong>-mf</strong> <em>fractional intensity threshold (0-1)</em>:
Option to specify the fractional intensity threshold used in the FSL BET brain extraction, if the <strong>-m</strong> / <strong>--mask</strong> flag is applied.
The default is 0.5, and smaller values give larger brain outline estimates.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</li>
<li><p><strong>-zx</strong>:
Flag to convert negative values in the source NIFTI dataset to zero, prior to applying the colourmap.
This helps to remove spurious negative values which might stretch the dynamic range in an un-wanted way.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</li>
<li><p><strong>-uthr</strong> <em>percentile value (0-100)</em>:
Option to specify the upper percentile value which will be used for clipping (default is 99.5).
Prior to applying the colourmap, the source NIFTI data will be tidied to remove any outlying high or low values, as
these can stretch the dynamic range in an un-wanted way. Any high signal intensity values above the <strong>uthr</strong> percentile
value will be clipped to this value. Setting <strong>uthr</strong> to 100 stops any clipping being applied to high signal intensity values.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</li>
<li><p><strong>-lthr</strong> <em>percentile value (0-100)</em>:
Option to specify the lower percentile value which will be used for clipping (default is 0).
Prior to applying the colourmap, the source NIFTI data will be tidied to remove any outlying high or low values, as
these can stretch the dynamic range in an un-wanted way. Any low signal intensity values below the <strong>lthr</strong> percentile
value will be clipped to this value. Setting <strong>lthr</strong> to 0 stops any clipping being applied to low signal intensity values.</p></li>
</ul>
</div>
<div class="section" id="example-usages">
<h2>Example Usages<a class="headerlink" href="#example-usages" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>Create a colour version of the <em>test.nii.gz</em> file, using the ‘hot’ colourmap:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>vxd_make_nii_rgb.py -i test.nii.gz -c hot
</pre></div>
</div>
<p>This will write a new file called <em>test_rgb.nii.gz</em>, with (R,G,B) values for each voxel.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</li>
<li><p>Create a colour version of the <em>t1_brain.nii.gz</em> file, using the ‘plasma’ colourmap. Use a brain mask to ensure the signal
in voxels outside of the brain is set to zero, and use a black background for these non-brain voxels:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>vxd_make_nii_rgb.py -i t1_brain.nii.gz -c plasma -m -b
</pre></div>
</div>
</li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="vxd_make_nii_rgb_fusion.html" class="btn btn-neutral float-right" title="vxd_make_nii_rgb_fusion.py" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../vxdDicom/vxd_summarize_dcminfo.html" class="btn btn-neutral float-left" title="vxd_summarize_dcminfo.py" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2021, Patrick Hales

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>